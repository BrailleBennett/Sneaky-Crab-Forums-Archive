/*
 =======================================================================*\
|| ###################################################################### ||
|| # vBulletin 5.7.4
|| # ------------------------------------------------------------------ # ||
|| # Copyright 2000-2023 MH Sub I, LLC dba vBulletin. All Rights Reserved.  # ||
|| # This file may not be redistributed in whole or significant part.   # ||
|| # ----------------- VBULLETIN IS NOT FREE SOFTWARE ----------------- # ||
|| # http://www.vbulletin.com | http://www.vbulletin.com/license.html   # ||
|| ###################################################################### ||
\*========================================================================*/
// ***************************
// js.compressed/infraction.js
// ***************************
vBulletin.precache("error_adding_infraction error_adding_warning error_reversing_infraction give_infraction_ginfraction infraction_added infraction_reversed please_check_the_box_to_reverse_infraction please_specify_reason_to_reverse_infraction received_infraction received_warning warning_added".split(" "),[]);vBulletin.ensureObj("infraction");vBulletin.ensureObj("privateMessage");
(function(b){function x(a){var c=getSelectedMessages(),d=function(a,d){for(var q in c)b("[data-node-id={0}]".format(c[q]),".infractions-list").toggleClass("read",d).find(".privateMessageActionCheck").prop("checked",!1)};if(0<c.length)if("0"==pageData.threadmarking||"0"==pageData.userid){for(var e in c){var f=vBulletin.discussionViewCookie;a?f.set(c[e],Math.round((new Date).getTime()/1E3)):f.unset(c[e])}d(c,a)}else vBulletin.AJAX({call:"/ajax/api/node/"+(a?"markReadMultiple":"markUnreadMultiple"),
data:{nodeids:c},success:function(b){d(b,a)}})}function p(a,c,d,e){if(!a&&(a=b("#private-message-toolbar .infractions-paginator .infractionsPageTo"),0==a.length))return!1;updateCounter=d||0;e=e||!1;var f=a.closest(".infractions-paginator"),g=b("#privateMessageContainer .main-pane .pending-posts-container"),h=f.find("#maxPageNum").filter(":input[type=hidden]").val();a=parseInt(f.find(":input[type=hidden][name=pagenum]").val(),10);var q=parseInt(f.find(":input[type=hidden][name=per-page]").val(),10);
c=parseInt(c,10);if(isNaN(c)||isNaN(h)||isNaN(a))return!1;if(1>c||c>h)return vBulletin.error("error","please_enter_a_valid_page_number"),!1;if(c==a&&!d)return!1;var r={};b("#infractionFilters input:checked").each(function(){r[this.name]=this.value});r.time&&(r.time={from:r.time});var n={setCurrentPage:c,setPerPage:q,getPagingInfo:d,options:r,isAjaxTemplateRenderWithData:!0};vBulletin.AJAX({call:"/ajax/render/privatemessage_infraction_main",data:n,success:function(a){g.html(a.template);0<b(".infractions-list").length&&
vBulletin.infraction.markInfractions();var q=a=0;c<h?(q=c+1,1<c&&(a=c-1)):a=c-1;f.find(":input[type=hidden][name=pagenum]").val(c);f.find(":input[type=hidden][name=next-page]").val(q);f.find(":input[type=hidden][name=prev-page]").val(a);f.find(".infractionsNext").toggleClass("h-disabled",!q);f.find(".infractionsPrev").toggleClass("h-disabled",!a);f.find(".infractionsPageTo").val(c);d&&(a=b("#privateMessageContainer .main-pane .pending-posts-container .pending-posts-pageinfo"),a=parseInt(a.find(".totalpages").val(),
10),f.find("#maxPageNum").filter(":input[type=hidden]").val(a),h=a,f.find(".infractionsPageCount").text(a));v&&vBulletin.privateMessage.updatePaginationLinks(y,c,h);v&&!e&&vBulletin.privateMessage.pmFilterHistory.isEnabled()&&(n.maxPage=h,a=vBulletin.privateMessage.getPrivateMessageUrl(c),vBulletin.privateMessage.pmFilterHistory.pushState({infractionFilterParams:n},document.title,a.url))}})}var e=b("#infractions-tab"),v=vBulletin.privateMessage&&vBulletin.privateMessage.jsReady||!1,y=b("#privateMessageContainer");
vBulletin.infraction.infractUser=function(a,c){var d=b(this);if(d.data("ajaxstarted"))return!1;var e=d.hasClass("js-infraction-received");if(e){a="received_infraction_form";var f="received_infraction";var g="receive-infraction-dialog"}else a="give_infraction_form",f="give_infraction_ginfraction",g="give-infraction-dialog";d.data("ajaxstarted",!0);vBulletin.AJAX({call:"/ajax/render/"+a,data:{userid:d.data("userid"),nodeid:d.closest(".js-post-controls").data("node-id")||d.data("nodeid"),userInfraction:d.data("userinfraction")},
complete:function(){d.data("ajaxstarted",null)},success:function(a){b("."+g).length?b("."+g).replaceWith(a):b(a).appendTo(document.body).hide();a=b("."+g);a.dialog({title:vBulletin.phrase.get(f),autoOpen:!0,modal:!0,resizable:!1,closeOnEscape:!1,showCloseButton:!1,width:a.hasClass("error-infraction-dialog")?500:e?600:700,dialogClass:"dialog-container infraction-dialog-container dialog-box",close:function(){var a=b(".js-editor",this);a.length&&vBulletin.ckeditor.editorExists(a)&&vBulletin.ckeditor.destroyEditor(a);
b(this).dialog("destroy").remove()},open:function(){var a=this;if(e)vBulletin.ajaxForm.apply(b(".infraction-reverse-form",a),[{error_phrase:"error_reversing_infraction",success:function(k,m,f,e){vBulletin.alert("reverse_this_infraction","infraction_reversed");"function"==typeof c&&c.apply(d.get(0),[k]);b(a).dialog("close")},beforeSubmit:function(a,c,d){if(b(".infraction-nodeid",c).is(":checked"))b.trim(b(".infraction-reason",c).val())||(k="please_specify_reason_to_reverse_infraction",m=b(".infraction-reason",
c));else{var k="please_check_the_box_to_reverse_infraction";var m=b(".infraction-nodeid",c)}return k?(vBulletin.warning("reverse_this_infraction",k,function(){m.trigger("focus")}),!1):!0}}]),b(".reverse-infraction",a).on("click",function(){b(".infraction-reverse-form",a).submit()});else{var f=b(".infraction-send-pm",a);vBulletin.ajaxForm.apply(b(a),[{dataType:"json",error_phrase:"error_adding_infraction",success:function(k,m,f,e){m=k.infractionNodeid&&!k.infractionNodeid.errors;e="warning";m?(f=k.isWarning?
"warning_added":"infraction_added",e=""):f=k.isWarning?"error_adding_warning":"error_adding_infraction";vBulletin.alert("give_infraction_ginfraction",f,e);m&&("function"==typeof c&&c.apply(d.get(0),[k]),b(a).dialog("close"))},beforeSubmit:function(c,d,e){if("0"==b(".infraction-level-control option:selected",d).val()){c=function(c,d){n(b(".infraction-level",a));vBulletin.warning("give_infraction_ginfraction",c,function(){d.trigger("focus")})};if(""==b.trim(b(".custom-reason",d).val()))return c("please_specify_custom_reason",
b(".custom-reason",d)),!1;e=Number(b(".custom-points",d).val());if(isNaN(e)||0>e)return c("please_specify_custom_points",b(".custom-points",d)),!1;e=b(".custom-period option:selected",d).val();var k=Number(b(".custom-expires",d).val());if("N"!=e&&(isNaN(k)||0>=k))return c("please_specify_custom_expires",b(".custom-expires",d)),!1}c=b(".infraction-ban-reason .ban-reason",a);if(c.is(":visible")&&!b.trim(c.val()))return n(b(".infraction-ban",a)),b(".ban-reason-desc",a).removeClass("h-hide"),c.trigger("focus"),
b(".dialog-content",a).scrollTop(0).scrollTop(b(".infraction-ban-reason",a).position().top),!1;if(Number(f.data("required"))){var m=b(".js-editor",d),h=vBulletin.ckeditor.getEditor(m);d=h?h.getData():h.val();if(!b.trim(d))return vBulletin.warning("give_infraction_ginfraction","please_specify_infraction_pm",function(){n(f);h?h.focus():m.trigger("focus")}),!1}}}]);var g=function(a){h.toggleClass("h-hide",!a).find("input, select").prop("disabled",!1).end().find(".selectBox").toggleClass("selectBox-disabled",
!a)};b(".infraction-level-control",a).on("change",function(c,d,e){c=b(this.options[this.selectedIndex]);e&&1==e.length||(e=b(this).closest(".infraction-level").find(".infraction-warning-control input"));d||(c.data("allow-warning")?(e.prop("disabled",!1).val(this.value).parent().removeClass("h-hide"),g(!1)):(e.prop("disabled",!0).parent().addClass("h-hide"),"0"==this.value&&(g(!0),b(".textbox",h).first().trigger("focus"))));var f=d=0;e.prop("checked")||"0"==this.value?"0"==this.value&&(d=Number(b(".custom-infraction-info .custom-points",
a).val())||0)&&(f=1):(d=Number(c.data("points"))||0,f=1);e=b(".infraction-dashboard-stats").data();e=d&&l(Number(e.points)+d,Number(e.infractions)+f);p(e);t()});b(".infraction-warning-control input",a).on("click",function(){this.checked?p(!1):b(".infraction-level-control",a).trigger("change",[!0,this])});b(".custom-points",a).on("change",function(){b(".infraction-level-control",a).trigger("change",[!0])});var h=b(".custom-infraction-info",a).removeClass("h-hide");b("select",a).selectBox();h.addClass("h-hide");
b(".js-content-entry-panel, .js-editor",f).data("callback",function(){t()});vBulletin.ckeditor.initEditorComponents(f,!0);b(".toggle-button",a).on("click",function(a){a=b(this);var c=a.closest(".blockrow-head"),d=c.next(".blockrow-body"),e=a.hasClass("expand");d.toggle(e);c.toggleClass("collapsed",!e);t();a.toggleClass("collapse expand");c=a.attr("title");a.attr("title",a.data("toggle-title")).data("toggle-title",c);return!1});var n=function(a){b(".toggle-button.expand",a).trigger("click")},l=function(c,
d){if(0==c&&0==d)return!1;var e=!1;b(".infraction-ban-list tbody tr",a).each(function(a,f){if(f=b(this).data())if(a=Number(f.points),f=Number(f.infractions),a&&c>=a||f&&d>=f)return e=!0,!1});return e},p=function(c){var d=b(".infraction-ban-reason",a);c?(d.removeClass("h-hide"),n(b(".infraction-ban",a))):d.addClass("h-hide")},u=b(".dialog-content",a),t=function(){u[0]||(u[0]=a);var b=u[0].scrollHeight>parseFloat(u.css("max-height"));u.toggleClass("has-scrollbar",b)};t();b(".infraction-level-control",
a).trigger("change")}b(".close-infraction",a).on("click",function(){b(a).dialog("close")});b(".ckeditor-bare-box.ckeditor-load-on-focus",a).on("focus",function(){vBulletin.ckeditor.initEditor(this.id,{complete:function(a){t()},error:function(a){b("#"+a).prop("disabled",!1).removeClass("ckeditor-load-on-focus")}})})}})}})};vBulletin.infraction.loadUserInfractions=function(a){b.post(vBulletin.getAjaxBaseurl()+"/ajax/render/user_infractions",{userid:a.userid,pagenum:a.pageNumber},function(c,d,n){a.container.html(c);
b(".pagenav-form",e).length&&new vBulletin.pagination({context:e,tabParamAsQueryString:!1,allowHistory:1==e.find(".conversation-toolbar-wrapper").data("allow-history"),onPageChanged:function(a,b){vBulletin.infraction.loadUserInfractions({container:e,userid:e.data("userid"),pageNumber:a,replaceState:!0})}});"function"==typeof a.callback&&a.callback(c);if(a.pushState||a.replaceState)c=vBulletin.makePaginatedUrl(location.href,a.pageNumber),l||(w="1"==e.find(".conversation-toolbar-wrapper").data("allow-history"),
l=new vBulletin.history.instance(w)),l.isEnabled()&&(d={from:"infraction_filter",page:a.pageNumber,tab:e.data("url-path")?e.data("url-path"):"#"+e.attr("id")},l[a.pushState?"pushState":"setDefaultState"](d,document.title,c))},"json")};var l,w;vBulletin.infraction.setHistoryStateChange=function(){l||(w="1"==e.find(".conversation-toolbar-wrapper").data("allow-history"),l=new vBulletin.history.instance(w));l.isEnabled()&&l.setStateChange(function(a){var b=l.getState();if("infraction_filter"==b.data.from){l.log(b.data,
b.title,b.url);a=e.closest(".ui-tabs");var d=a.find(".ui-tabs-nav > li").filter('li:has(a[href*="#{0}"])'.format(e.attr("id")));d.hasClass("ui-tabs-active")?vBulletin.infraction.loadUserInfractions({container:e,userid:e.data("userid"),pageNumber:b.data.page,pushState:!1}):(b=d.index(),vBulletin.selectTabByIndex.call(a,b))}},"infraction_filter")};vBulletin.infraction.markInfractions=function(){if("0"==pageData.threadmarking||"0"==pageData.userid){var a,c,d;b(".infractions-list .list-item").each(function(){d=
b(this);c=d.data("nodeId");(a=vBulletin.discussionViewCookie.get(c))&&d.addClass("read")})}};b(document).off("click",".js-post-control__infraction").on("click",".js-post-control__infraction",function(a){vBulletin.infraction.infractUser.apply(this,[a,function(a){var c=b(this),e=c.find(".b-icon"),f=c.hasClass("js-infraction-received");e.removeClass("b-icon__tickets--neutral b-icon__tickets--warned b-icon__tickets--infracted");if(f){a="give_infraction_ginfraction";var g="b-icon__tickets--neutral"}else a.isWarning?
(a="received_warning",g="b-icon__tickets--warned"):(a="received_infraction",g="b-icon__tickets--infracted");c.toggleClass("js-infraction-received",!f);c.attr("title",vBulletin.phrase.get(a));e.addClass(g)}])});e.off("click",".infractionCtrl").on("click",".infractionCtrl",function(a){vBulletin.infraction.infractUser.apply(this,[a,function(a){vBulletin.infraction.loadUserInfractions({container:e,userid:b(this).data("userid"),pageNumber:1,pushState:1!=Number(b('.pagenav-form input[name="page"]',e).val())})}])});
e.on("click",".view-infraction",function(a){vBulletin.infraction.infractUser.apply(this,[a,function(a){a=Number(b('.pagenav-form input[name="page"]',e).val())||1;vBulletin.infraction.loadUserInfractions({container:e,userid:b(this).data("userid"),pageNumber:a,pushState:1!=a})}])});b(document).off("click","#privateMessageContainer .js-button-group .view-infraction").on("click","#privateMessageContainer .js-button-group .view-infraction",function(a){vBulletin.infraction.infractUser.apply(this,[a,function(a){}])});
b(".infraction-delete").off("click").on("click",function(a){$button=b(this);var c=!1;if($button.parents("#pmFloatingBarContent").hasClass("infractions-paginator"))var d=getSelectedMessages();else d=[b("#privateMessageContainer .js-conversation-starter").data("nodeId")],c=!0;0<d.length&&openConfirmDialog({title:vBulletin.phrase.get("messages_header"),message:vBulletin.phrase.get("are_you_sure_delete_infractions"),iconType:"warning",onClickYes:function(){vBulletin.AJAX({url:vBulletin.getAjaxBaseurl()+
"/ajax/api/node/deleteNodes",data:{nodeids:d,hard:0},success:function(a){c?location.href=b("#pmBtnBackToInfractions").prop("href"):location.reload()}})}})});b(".infraction-mark_as_read").off("click").on("click",function(a){x(!0)});b(".infraction-mark_as_unread").off("click").on("click",function(a){x(!1)});b(document).ready(function(){0<b(".infractions-list").length&&vBulletin.infraction.markInfractions();if(0<b("#pmBtnBackToInfractions").length){var a=b("#privateMessageContainer .conversation-list .b-post--infraction").data("nodeId");
vBulletin.markRead(a)}});b("#infractionFilters").trigger("reset").find(".filter-options input").off("click").on("click",function(a){A.apply(this)});b(document).off("click","#privatemessagePaging .infractionsPrev").on("click","#privatemessagePaging .infractionsPrev",function(a){a.preventDefault();a=b(this).closest("#privatemessagePaging").find(':input[type=hidden][name="prev-page"]').val();p(b(this),a)});b(document).off("click","#privatemessagePaging .infractionsNext").on("click","#privatemessagePaging .infractionsNext",
function(a){a.preventDefault();a=b(this).closest("#privatemessagePaging").find(':input[type=hidden][name="next-page"]').val();p(b(this),a)});var z=function(a){var c=b("#privatemessagePaging"),d=c.find("input[name='pagenum']");a=d.val();var e=c.find("#maxPageNum");c=e.val();var f=b("#infractionFilters"),g={};vBulletin.privateMessage.updatePaginationLinks(y,a,c);vBulletin.privateMessage.getPageFiltersForUrl=function(a){f.find("input:checked").each(function(){a["filter_"+this.name]=this.value});return a};
b("#infractionsFilter").length&&b("#infractionFilters input:checked").each(function(){queryParams["filter_"+this.name]=this.value});vBulletin.privateMessage.pmFilterHistory.isEnabled()&&(g={infractionFilterParams:{setCurrentPage:a,options:{},maxPage:c}},f.find("input:checked").each(function(){g.infractionFilterParams.options[this.name]=this.value}),g.infractionFilterParams.options.time&&(g.infractionFilterParams.options.time={from:g.infractionFilterParams.options.time}),vBulletin.privateMessage.pmFilterHistory.setDefaultState(g,
document.title,window.location.href),vBulletin.privateMessage.pmFilterHistory.setStateChange(function(a){a=vBulletin.privateMessage.pmFilterHistory.getState();a.data.hasOwnProperty("infractionFilterParams")&&(a=a.data.infractionFilterParams,b.each(a.options,function(a,b){a="input[name='{0}'][value='{1}']".format(a,b);f.find(a).prop("checked",!0)}),e.val(a.maxPage),d.val(a.setCurrentPage),p(null,a.setCurrentPage,!0,!0))},"privatemessage"));v=!0};if(v)z();else b(document).one("vb-privatemessage-js-ready",
z);b(document).off("keypress","#privatemessagePaging .infractionsPageTo").on("keypress","#privatemessagePaging .infractionsPageTo",function(a){if(13==a.keyCode){a.preventDefault();a=b(this);var c=parseInt(a.val(),10);if(isNaN(c))return vBulletin.error("error","please_enter_a_valid_page_number"),!1;p(a,c)}});var A=function(a){$paginateButton=b("#private-message-toolbar .infractions-paginator .infractionsPageTo");if($paginateButton.length)p($paginateButton,1,!0);else{var c={};b(this).closest(".filter-options-list").find("input:checked").each(function(){c[this.name]=
b(this).val()});c.time&&(c.time={from:c.time});b(this).prop("checked",!0);c.page=1;c.perpage=pmPerPage;vBulletin.AJAX({call:"/ajax/render/privatemessage_infraction_main",data:{options:c,isAjaxTemplateRenderWithData:!0},success:function(a){b("#privateMessageContainer .pending-posts-container").html(a.template);pmPageNum=1;0<b(".infractions-list").length&&vBulletin.infraction.markInfractions()}})}}})(jQuery);
;

// ***************************
// js.compressed/conversation.js
// ***************************
vBulletin.precache("cancel_new_with_quote create_new_conversation_with_quote error_fetching_comments error_fetching_quotes error_x existing_message_will_be_deleted invalid_server_response_please_try_again new_with_quote please_click_on_the_quote_icon_of_the_post_you_want_to_quote post_reply share_post_link_help visitor_message x_comment x_comments_lower your_post_is_now_being_reviewed_and_waiting_for_moderators_approval".split(" "),[]);vBulletin.ensureObj("conversation.contentEntryBox");
$.extend(vBulletin.conversation,function(b,d){function m(a){0<a.nodeIds.length&&(b("body").css("cursor","wait"),d.AJAX({call:"/createcontent/fetch-quotes",data:{nodeid:a.nodeIds},complete:function(){b("body").css("cursor","auto")},success:function(c){var g="";b.each(c,function(b,a){g+=JShtmlEncode(a)+"<br/><br/>"});d.ensureFun(a.onSuccess)(b.trim(g))},title_phrase:"conversation",error_phrase:"error_fetching_quotes"}))}function r(a){var d=b(".b-post-control__quote--selected",a),g=b(".js-content-entry .js-editor",
a).last();if(0<d.length){var l=[];d.each(function(){l.push(b(this).parent().data("node-id"))});m({nodeIds:l,onSuccess:function(b){if(h.editorExists(g)){var a=h.getEditor(g);a&&a.setData("",function(){a.insertHtml(b.replace(/(\n)/gi,"<br />"));a.focus()})}else g.val(b.replace(/<br(\s*\/|)>/gi,"\n")).trigger("focus")}})}else h.editorExists(g)?h.getEditor(g).focus():g.trigger("focus")}function u(b){d.qtip.apply(b,"qtip-sharepostlink",{content:{title:{text:d.phrase.get("share_post_link_help"),button:!0},
text:'<input type="text" class="textbox stretch" value="'+b.attr("href")+'" />'},show:{event:"click",solo:!0,ready:!0},events:{visible:function(b,a){a.elements.content.find("input.textbox").trigger("select").trigger("focus")}},hide:{event:"unfocus",fixed:!0}})}function v(a){return 1==b(".conversation-media-view",a).length?2:1==b(".conversation-stream-view",a).length?1:0}function w(){var a=b(".conversation-content-widget"),c="1"==b(".conversation-toolbar-wrapper",a).data("allow-history");a.filter(".widget-tabs").tabs({active:v(a)}).find(".widget-header .widget-tabs-nav li.ui-state-default:not(.ui-tabs-active) a").off("click").on("click",
function(){location.href=b(this).attr("data-href");return!1});var g=new d.pagination({context:a,allowHistory:c,onPageChanged:function(e,k,f){n.updatePageNumber(e);if(!k){if(k=n.getOption("customFilter"))k.pagenum=e,delete n.lastFilters,f&&delete k[b(".toolbar-search-form .js-filter-search",a).attr("name")];n.applyFilters(!1,!1,!1,!0)}d.Responsive.checkForVideoSignature()}}),l=b(".conversation-toolbar-wrapper.scrolltofixed-floating",a),p=function(){return 0<a.length?a.offset().top+(a.outerHeight()-
parseFloat(a.css("border-bottom-width")))-l.height():0};try{var m=new d.scrollToFixed({element:l,limit:p()})}catch(e){}var n=new d.conversation.filter({context:a,scrollToTop:a,pagination:g,allowHistory:c,hash:a.find(".js-module-top-anchor").attr("id"),onContentLoad:function(){m.updateLimit(p())}});b(document).offon("click",".js-show-post-link",function(a){a.preventDefault();u(b(a.currentTarget))});b(document).offon("click","a.js-scroll-if-on-page",a=>{a=b(a.currentTarget);a=parseInt(a.data("nodeid"),
10);$anchor=b(".js-post[data-node-id='"+a+"']:not(.pinned-answer)");if($anchor.length)return vBulletin.animateScrollTop($anchor.offset().top),!1});b(".conversation-toolbar .post-reply-btn").off("click").on("click",function(e){e=b(".js-content-entry").last();if(1==e.length){var k=b(".js-editor",e);e=e.offset().top;var f=b(".conversation-toolbar-wrapper"),c=f.hasClass("scrolltofixed");f=f.length&&f.outerHeight(!0)||0;var g=h.editorExists(k);c||(e+=f);g?r(a):h.initEditor(k,{complete:function(){r(a)}});
d.animateScrollTop(e,{duration:500,complete:function(){g&&h.focusEditor(k)}})}});b(document).off("mouseover",".js-userinfo__signature").on("mouseover",".js-userinfo__signature",function(){var a=b(this);"1"!=a.data("qtip-initialized")&&(a.data("qtip-initialized","1"),a.find(".user-signature"),d.qtip.apply(a,"qtip-signature",{content:a.find(".user-signature"),hide:{event:"unfocus"},show:{solo:!0}}),b(this).trigger("mouseover"))});c=b(".conversation-list",a);b(".js-post-controls",c).disableSelection();
c.off("click",".js-post-control__quote").on("click",".js-post-control__quote",function(){b(this).toggleClass("b-post-control__quote--selected");var a=b(".post-reply-btn .js-button__text-secondary").text().match(/[0-9]+/);a=a?Number(a[0]):0;b(this).hasClass("b-post-control__quote--selected")?a++:a--;t.clickQuoteIcon(a)});vBulletin.conversation.initContentEvents(c);"inlinemod"in d&&d.ensureFun(d.inlinemod.init)(a);c.off("click",".js-comment-entry__post").on("click",".js-comment-entry__post",function(a){vBulletin.conversation.postComment.apply(this,
[a,function(a){if(a)if(a.redirecturl)location.replace(a.redirecturl);else{var f=b(this).closest(".js-post"),e=a.totalcomments,c=f.find(".js-comments").removeClass("h-hide"),g=f.find(".js-comments__comments");b(this).closest(".js-comment-entry").addClass("b-comment-entry--has-comments").find(".js-comment-entry__textbox").val("").trigger("input");var k=b(a.template),h=k.find(".js-comment");k.appendTo(g);c.find(".js-comments__footer").addClass("h-hide");c.find(".js-comments__page--prev").show().data("page-num",
1).prev("label").hide();c.find(".js-comments__header").removeClass("h-hide").find(".js-comments__pagination").removeClass(function(){return 1<e?"h-hide":""}).end().find(".js-comments__total-text").text(function(){return d.phrase.get(1<e?"x_comments_lower":"x_comment",e)});f=f.closest(".ui-tabs-panel").find(".conversation-toolbar-wrapper");f.hasClass("scrolltofixed-floating")&&(f=f.data("object-instance"))&&f.addLimit(h.outerHeight(!0));d.scrollToAnchor("#post"+a.nodeId)}}])});c.off("click",".js-comments__page--prev, .js-comments__page--next").on("click",
".js-comments__page--prev, .js-comments__page--next",function(){b("body").css("cursor","wait");var a=b(this),c=a.closest(".js-post"),f=c.find(".js-comments"),g=f.find(".js-comments__comments"),h=Number(a.data("page-num"))||0,l=a.closest(".canvas-widget").attr("data-widget-instance-id");d.AJAX({call:"/ajax/fetch-comments",data:{page:h,parentid:c.attr("data-node-id"),postindex:c.find(".js-post__content .js-show-post-link").text().replace("#",""),widgetInstanceId:l,isblogcomment:1==a.closest(".blog-list").length?
1:0,isarticlecomment:1==a.closest(".article-list").length?1:0},complete:function(a,c){b("body").css("cursor","auto")},success:function(c,d,e){if(c.templates){var k=b("<ul />").attr("class",g.attr("class")),l=c.totalcomments;b.each(c.templates,function(a,b){k.append(b)});g.replaceWith(k);d=Number(k.find(".js-comment:first-child .js-show-post-link span").text().replace(/\D/g,""));e=Number(k.find(".js-comment:last-child .js-show-post-link span").text().replace(/\D/g,""));var n=Math.ceil(l/vBulletin.conversation.COMMENTS_PER_PAGE);
if(a.hasClass("js-comments__page--prev")){var m=a;var q=f.find(".js-comments__page--next")}else m=f.find(".js-comments__page--prev"),q=a;var p=function(a,b,c){a.find(".js-comments__pagination > label").show().text(b==c?b:"{0} - {1}".format(b,c))};h=c.page;p(f.find(".js-comments__header"),d,e);1==h?f.find(".js-comments__footer").addClass("h-hide"):(d=e+1,e=d+vBulletin.conversation.COMMENTS_PER_PAGE-1,e=e>l?l:e,c=f.find(".js-comments__footer"),c.removeClass("h-hide"),p(c,d,e));m.data("page-num",h+1);
q.data("page-num",h-1||1);m.removeClass("h-hide-imp")[n>h?"show":"hide"]().prev("label").show();q[1<h?"show":"hide"]()}},title_phrase:"conversation",error_phrase:"error_fetching_comments"})});vBulletin.conversation.bindEditFormEventHandlers("all");if(c=parseInt(pageData.nodeid))d.markRead(c),d.AJAX({call:"/ajax/api/node/incrementNodeview",data:{nodeid:c},error:d.ajaxtools.logAjaxError,api_error:d.ajaxtools.logApiError});-1!=location.href.indexOf("edit=1")&&pageData.nodeid&&0<pageData.nodeid&&b("#edit-"+
pageData.nodeid).trigger("click");b(document).off("change",".js-article-content-pagenav").on("change",".js-article-content-pagenav",function(){location.href=b(this).val()})}if(!d.pageHasSelectors([".forum-conversation-content-widget",".group-conversation-content-widget",".blog-conversation-content-widget",".profile-widget","#privateMessageContainer .infractions"]))return!1;var h=d.ckeditor,t={clickQuoteIcon:function(a){this.setPostReplyButtonStyle(a);1==a&&b(".post-reply-btn:visible").trigger("click");
0==a&&(a=b(".js-content-entry").last(),a=b(".js-editor",a).attr("id"),h.editorExists(a)&&h.getEditor(a).setData(""))},clickCancelButton:function(){b(".b-post-control__quote--selected").removeClass("b-post-control__quote--selected");this.setPostReplyButtonStyle(0);return!0},setPostReplyButtonStyle:function(a){var c=b(".post-reply-btn"),d=c.find(".js-button__text-secondary");0<a?(c.addClass("b-button--special"),d.text("("+a+")")):(c.removeClass("b-button--special"),d.text(""))}};b(function(){w()});
return{replyWithQuotes:t}}(jQuery,vBulletin));
;

// ***************************
// js.compressed/subscribe.js
// ***************************
vBulletin.precache(["follow","following","following_pending","social_group_count_members_x","unsubscribe_overlay_error"],[]);
(function(){function h(a,b){a=$(".js-replace-member-count-"+a);a.length&&a.each(function(){var a=$(this),f=a.data("replace-phrase-varname"),d=parseInt(a.data("member-count"),10)+b;a.text(vBulletin.phrase.get(f,d));a.data("member-count",d)})}vBulletin.subscribe={};var g=function(a,b){a.children(".js-button__text-primary").text(vBulletin.phrase.get(b))},d=function(a,b,c,f){g(a,b);a.addClass((c||"")+" b-button--special").removeClass((f||"")+" b-button--secondary")},e=function(a,b,c,f){g(a,b);a.addClass((c||
"")+" b-button--secondary").removeClass((f||"")+" b-button--special")},k=function(a,b,c){vBulletin.AJAX({call:b,data:c,success:function(b){!isNaN(b)&&1<=b?1==b?d(a,"following","isSubscribed"):d(a,"following_pending","is-pending"):vBulletin.error("follow","follow_error")},title_phrase:"follow",error_phrase:"follow_error"})},l=function(a){var b=$(a),c=parseInt(b.attr("data-node-id"),10);a=parseInt(b.attr("data-owner-id"),10);vBulletin.AJAX({call:"/ajax/api/node/requestChannel",data:{channelid:c,recipient:a,
requestType:"sg_member"},success:function(a){!0===a?(d(b,"joined","has-joined"),h(c,1),(b.hasClass("join-to-post-btn")||b.hasClass("js-refresh"))&&window.location.reload()):isNaN(a)||d(b,"following_pending","is-pending")},title_phrase:"join",error_phrase:"join_error"})},m=function(a){var b=$(a),c=parseInt($(a).attr("data-node-id"),10);vBulletin.AJAX({call:"/ajax/api/blog/leaveChannel",data:{channelId:c},success:function(a){!0===a?(b.hasClass("js-button--follow")?(g(b,"follow"),b.addClass("b-button--special").removeClass("isSubscribed b-button--unfollow")):
(g(b,"join"),b.removeClass("has-joined b-button--special leave-btn")),h(c,-1),b.is(".js-no-refresh")||location.reload()):vBulletin.error("leave","invalid_server_response_please_try_again")},title_phrase:"leave",error_phrase:"invalid_server_response_please_try_again"})},n=function(a){var b=$(a);a=$(a).attr("data-node-id");vBulletin.AJAX({call:"/ajax/api/follow/delete",data:{follow_item:a,type:"follow_contents"},success:function(a){1==a?e(b,"follow","","isSubscribed b-button--unfollow"):vBulletin.error("follow",
"unfollow_error")},title_phrase:"follow",error_phrase:"unfollow_error"})};vBulletin.subscribe.updateSubscribeButton=function(a){if("undefined"!=typeof a){var b=$(".js-button--follow").filter(function(){return $(this).data("node-id")==pageData.nodeid&&pageData.nodeid!=pageData.channelid});switch(a){case 0:e(b,"follow","","isSubscribed b-button--unfollow");break;case 1:e(b,"following","isSubscribed");break;case 2:e(b,"following_pending","is-pending")}}};$(".js-button--follow").on("click",function(a){if($(this).hasClass("isSubscribed"))$(this).hasClass("b-button--unfollow")&&
($(this).hasClass("is-blog-channel")?m(this):n(this));else if(a=$(this),!a.hasClass("isSubscribed")&&!a.hasClass("is-pending")){var b=parseInt(a.attr("data-node-id"),10),c={};a.hasClass("is-topic")?(c.follow_item=b,c.type="follow_contents",k(a,"/ajax/api/follow/add",c)):(c={},c.channelid=b,c.recipient=parseInt(a.attr("data-owner-id"),10),a.hasClass("is-blog-channel")?c.requestType="member":a.hasClass("is-sg-channel")?c.requestType="sg_subscriber":c.requestType="subscriber",k(a,"/ajax/api/node/requestChannel",
c))}});$(".js-button--follow").on("mouseover",function(a){a=$(this);a.hasClass("isSubscribed")&&!a.hasClass("is-owner")&&e(a,"following_remove","b-button--unfollow")});$(".js-button--follow").on("mouseout",function(a){a=$(this);a.hasClass("b-button--unfollow")&&d(a,"following","","b-button--unfollow")});$(".join-to-post-btn").on("click",function(a){$(this).hasClass("has-joined")||$(this).hasClass("is-pending")||l(this)});$(document).on("click",".join-btn",function(a){$(this).hasClass("has-joined")||
$(this).hasClass("is-pending")?$(this).hasClass("leave-btn")&&!$(this).hasClass("is-owner")&&m(this):l(this)});$(document).on("mouseover",".join-btn",function(a){a=$(this);a.hasClass("has-joined")&&!a.hasClass("is-owner")&&e(a,"leave","leave-btn")});$(document).on("mouseout",".join-btn",function(a){a=$(this);a.hasClass("leave-btn")&&!a.hasClass("is-owner")&&d(a,"joined","","leave-btn")})})();
;

// ***************************
// js.compressed/tag-editor.js
// ***************************
vBulletin.precache("add_tags edit_tags error error_adding_search_tips_code_x error_adding_tags_code_x error_fetching_popular_tags invalid_server_response_please_try_again invalid_x_tag_length loading none popular_tags_cloud tag_cloud unable_to_load_tag_editor unable_to_save_tags you_may_add_one_more_tag you_may_add_x_more_tags you_may_not_add_any_more_tags".split(" "),["tagforcelower","tagmaxlen","tagminlen"]);
(function(b){function A(d,e){var k=e.split(",");e=[];b.each(k,function(b,d){""!=d&&e.push(d)});vBulletin.AJAX({call:"/ajax/api/tags/updateUserTags",data:{nodeid:d,taglist:e},success:function(e){if(e){var k=b("#content-tags-"+d);k.find(".js-content-tag, .js-content-tag-none").remove();e.tags&&0<e.tags.length?b.each(e.tags,function(d,r){var h=b("<span />").addClass("js-content-tag");b("<a />").attr("href",r.searchurl).html(r.tagtext).appendTo(h);d<e.tags.length-1&&h.append(document.createTextNode(", "));
h.appendTo(k)}):b("<span />").addClass("js-content-tag-none").html(vBulletin.phrase.get("none")).appendTo(k)}},error_phrase:"unable_to_save_tags",title_phrase:"edit_tags"})}function B(d){var e=b(this).data("node-id");vBulletin.AJAX({call:"/ajax/render/tag_editor",data:{nodeid:e,dialogOnly:!0,editPost:!0,editorClass:"js-topic-tag-editor",isAjaxTemplateRenderWithData:!0},success:function(k){b("body").append(k.template);b(document).on("vb-tag-editor-init",function(b,d){function k(){h.dialog("destroy").closest(".tag-editor-wrapper").remove()}
var h=d.$dialog;h.on("vb-tag-dialog-cancel",k);h.on("vb-tag-dialog-save",function(b,d){A(e,d.tagList);k()})});new vBulletin.tagEditor.instance(".js-topic-tag-editor",!1,!1,d)},error_phrase:"unable_to_load_tag_editor",title_phrase:"edit_tags"})}var w=vBulletin.ensureObj("jsexec.tag_editor",{exec:0});w.exec++;if(!(1<w)){var q={};vBulletin.tagEditor=vBulletin.tagEditor||{};vBulletin.tagEditor.instance=function(d,e,k,h){function H(){var a=l.find(".you-may-add-text");if(n||m){var c=n&&!m?n:!n&&m?m:Math.min(n,
m);a.find("span").text(c)}else a.addClass("h-hide");y()?f.is(":visible")&&f[0].focus():f.hide()}function w(a){a=b(this);var c=a.parent();!c.hasClass("added")&&x(a.text())&&(c.addClass("added"),f.is(":visible")&&f[0].focus());return!1}function r(a,c){0<a.length&&(c=(c.find(".tag-input").val()||"").split(","),b.each(c,function(c,d){var f=b.trim(d);a.each(function(){b(this).data("tag")==f&&b(this).addClass("added")})}))}function I(a){a.stopPropagation();var c=b(this),d=p.find(".tag-editor-container");
1==d.length?(d.dialog({title:vBulletin.phrase.get("add_tags"),autoOpen:!1,modal:!0,resizable:!1,closeOnEscape:!1,showCloseButton:!1,width:500,dialogClass:"dialog-container tag-editor-dialog-container dialog-box",open:function(){g.clearElements();var a=p.find(".tag-input").val();if(a){a=a.split(",");for(var e in a)x(b.trim(a[e]))}else t&&!f.attr("placeholder")&&f.attr("placeholder",t);0<z()&&f.show();K(c.data("node-id"));var C=b(".tag-cloud",d);vBulletin.tagEditor.fetchPopularTags({type:p.data("type")||
"nodes",noformat:1,success:function(a){C.html(a);r(C.find(".tagcloudlink"),p)},error:function(a){C.html('<span class="error">{0}</span>'.format(a))}})},close:function(){p.data("autocomplete-instance").close()}}).dialog("open"),c.data("tag-dialog",d),d.data("parent",c.closest("form, .search-controls-tags, .form_row"))):(d=c.data("tag-dialog")||b(),d.dialog("open"));return!1}var A=this,u=!1,v=!1,D=vBulletin.options.get("tagmaxlen")||25,B=vBulletin.options.get("tagminlen")||3,n=0,m=0,E=!1,f=b(d),l=f.closest(".tag-editor-container"),
p=f.closest(".tag-editor-wrapper");l.data("node-id");var g=!1,t=f.attr("placeholder")?f.attr("placeholder"):"",F=t?t.length:10,x=function(a,c){if(!g)return!1;if("undefined"==typeof c||1>c)c=pageData.userid;var b=g.getMinLength();if(a.length<b)return vBulletin.warning("error",["invalid_x_tag_length",b]),!1;1==vBulletin.options.get("tagforcelower")&&(a=a.toLowerCase());a.length>D&&(a=a.substr(0,D));c=g.addElement(a,c);f.val("");z();return c},J=function(a){var c=a.length,b;for(b=0;b<c;++b)x(a[b])},G=
function(){f.attr("size",F);var a=JShtmlEncode(b.trim(f.val()));if(""==a)return!1;var c="Adding tag: "+a;0<y()&&(setTimeout(function(){x(a)},10),c+=" (Tag added)");console.log(c)},y=function(){if(e||0==n&&0==m)return!0;var a=g.countElements(),c=b(g.getElements()).filter(function(a,c){return 0==pageData.userid||c.value==pageData.userid}).length;a=0<n?n-a:m-a;return Math.min(0==m?a:m-c,a)},z=function(){var a=l.find(".you-may-add-x-tags"),c=y();if(!0===c)return!0;if(1<c)var b=["you_may_add_x_more_tags",
c];else 1==c?b="you_may_add_one_more_tag":(b="you_may_not_add_any_more_tags",c=0);a.toggleClass("warning",0==c).html(vBulletin.phrase.get(b));return c},K=function(a){e?f[0].focus():q[a]?(n=q[a].maxTags,m=q[a].maxUserTags,E=q[a].canManageTags,H()):(q[a]={},vBulletin.AJAX({call:"/ajax/api/tags/getNodeTags",data:{nodeid:a},success:function(c){b.isArray(c.tags)&&(n=parseInt(c.maxtags,10),m=parseInt(c.maxusertags,10),E=c.canmanagetags,q[a]={maxTags:n,maxUserTags:m,canManageTags:E},H())},api_error:b.noop,
error:b.noop}))};this.addTag=function(a,c){x(a,c)};this.addTags=function(a){J(a)};this.setTags=function(a){g&&(g.clearElements(),J(a))};this.removeAllTags=function(){g.clearElements()};this.getTags=function(){return g?g.getLabels():!1};this.getTagEditor=function(){return f};p.data("initialized")?console.log("Tag Editor is already initialized."):(p.attr("data-initialized",!0),function(){if(0==f.length)return!1;f.attr("maxlength",D);g=new vBulletin_Autocomplete(f,{apiClass:"Tags",containerClass:(k||
"")+" entry-field h-clearfix",placeholderText:t,editorContext:{type:"tags",context:A},minLength:B,beforeAdd:function(a,c){u=v?!0:!1;return 0==y()?!1:!0},afterAdd:function(a,c){0==z()&&f.hide();f.attr("placeholder","");r(l.find(".tagcloudlink"),l)},afterDelete:function(a,c){u=v?!0:!1;c=z();if(e||0<c)f.show(),setTimeout(function(){f[0].focus()},10);f.attr("placeholder",function(){var a=g?g.getLabels():!1;return a&&0!=a.length?"":t});c=l.find(".tag-cloud .tagcloudlink");if(0==c.length){var d=l.find(".popular-tags-link");
d.length&&d.qtip&&(c=d.qtip("api").elements.tooltip.find(".tagcloudlink"))}c.each(function(){b(this).data("tag")==a&&b(this).removeClass("added")})}});f=g.getInputField();p.data("autocomplete-instance",g)}(),f.off("keydown").on("keydown",function(a){var c=b(a.target).val().length;b(a.target).attr("size",c>F?c:F);if(13==a.which)return u=v?!0:!1,G(),a.preventDefault(),!1}),f.off("blur").on("blur",function(a){v=setTimeout(function(){u||G();v=u=!1},0)}),f.off("click").on("click",function(a){b(a.target).hasClass("tag-input")||
(b(".tag-input",b(this)).trigger("focus"),u=v?!0:!1);return!1}),f.each(function(){b(this).closest("form").on("submit",G)}),b(".tag-cloud-text.inline-tag-cloud .popular-tags-link",l).off("click").on("click",function(){var a=l.find(".tag-cloud");vBulletin.tagEditor.fetchPopularTags({type:"nodes",noformat:1,success:function(c){a.html(c);r(a.find(".tagcloudlink"),l)},error:function(c){a.html('<span class="error">{0}</span>'.format(c))}})}),vBulletin.qtip.apply(b(".tag-cloud-text:not(.inline-tag-cloud) .popular-tags-link",
l),"qtip-populartags",{content:{title:{text:vBulletin.phrase.get("tag_cloud"),button:!1},text:function(a,c){function b(a){var b=vBulletin.phrase.get("error_fetching_popular_tags");a&&(b+=" "+vBulletin.phrase.get(a));c.set("content.text",'<span class="error">{0}</span>'.format(b))}vBulletin.AJAX({call:"/search/fetchTagCloud",data:{type:"nodes",noformat:1},success:function(a){c.set("content.text",'<div class="tag-cloud">{0}</div>'.format(a));a=c.elements.tooltip;a.on("click",".tag-cloud .tagcloudlink label",
w);r(a.find(".tagcloudlink"),p)},api_error:function(a){b(a[0])},error:function(){b()}});return vBulletin.phrase.get("working_ellipsis")}},position:{at:"bottom center",my:"top center",viewport:b(window),effect:!1},show:{event:"click",solo:!0},hide:"unfocus"}),l.on("click",".tag-cloud .tagcloudlink label",w),p.on("click",".add-tag-link",I),"undefined"!==typeof h&&I.call(h.target,h),b(document).trigger("vb-tag-editor-init",{$dialog:l}))};vBulletin.tagEditor.fetchPopularTags=function(d){d=d||{};d.type=
"search"!=d.type?"nodes":d.type;var e="function"==typeof d.error?d.error:b.noop;vBulletin.AJAX({call:"/search/fetchTagCloud",data:{type:d.type,noformat:d.noformat},success:function(b,e,q){"function"==typeof d.success&&d.success(b,e,q)},api_error:function(b){e("{0} {1}".format(vBulletin.phrase.get("error_fetching_popular_tags"),vBulletin.phrase.get(b[0])))},error:function(){e(vBulletin.phrase.get("error_fetching_popular_tags"))}})};b(function(){b(document).offon("click.tage",".tag-editor-container .cancel-tag-btn",
function(){b(".tag-editor-container").dialog("close").trigger("vb-tag-dialog-cancel")});b(document).offon("click.tage",".tag-editor-container .save-tag-btn",function(){var d=b(this).closest(".tag-editor-container"),e=d.find(".tag-input").val(),k=e.replace(/,/g,", "),h=d.data("parent");h.find(".tag-list span").text(k);h.find(".tag-input").val(e);h.find(".tag-list").toggleClass("h-hide",!e);d.dialog("close").trigger("vb-tag-dialog-save",{tagList:e})});b(document).offon("mousedown.tage",".tag-editor-container .autocomplete-container",
function(){var d=this;setTimeout(function(){var e=b(".autocompleteHelper:visible",d);0<e.length&&e[0].focus()},10);return!1});0<b(".js-content-entry-tag-editor").length&&vBulletin.tagEditor&&new vBulletin.tagEditor.instance(".js-content-entry-tag-editor");b(document).offon("click.tage",".js-edit-tags",B)})}})(jQuery);
;

